
<html>
<head>
  <style>
    .input, .btn {
      font-size: 24px;
    }
    .sum h1 {
      font-size: 100px;
    }
  </style>
</head>
<body>
  <div>
    <textarea id="input" name="name" class="input" rows="8" cols="40" onkeyup="getSum()"></textarea>
  </div>
  <div class="sum">
    <h1 id="result"></h1>
  </div>
  <script type="text/javascript">
    window.onload = () => {
      let input = document.getElementById("input")
      input.focus()
      navigator.clipboard.readText()
        .then(text => {
          input.value = text
          getSum()
        })
        .catch(err => {
          console.error('Failed to read clipboard contents: ', err)
        })
    }
    function formatNumber(num) {
      // https://blog.abelotech.com/posts/number-currency-formatting-javascript/
      return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,')
    }
    // https://gist.github.com/min9nim/814663f37f565c540c8bbee9296ea6a4
    function getSum(){
      const value = document.getElementById("input").value
      const mapper = str => Number(str.replace(',', ''))
      const acc = (a,b) => a+b
      const sum = value.trim().split('\n').map(mapper).reduce(acc)
      document.getElementById("result").innerText = formatNumber(sum)
    }
  </script>
</body>
</html>
